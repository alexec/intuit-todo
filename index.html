<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>TODO</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
<style type="text/css">
</style>
</head>
<body>


    <div class="container">
      <p id="summary">Loading...</p>
      <div id="items">
      </div>
      <p>
      <input class="input" name="item" onKeyUp="if (this.value !== '' &amp;&amp; event.keyCode === 13) {todos.add({'title': this.value});this.value='';}">
    </p>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
      <script>
        if (!localStorage.items) localStorage.items = JSON.stringify([]);

        var todos = {
          "init": function(items) {
            this.items = items;
          },
          "add": function(options) {
              var title = options.title || "";
              if (title == "") {
                throw new Error("title blank");
              }
              var done = options.done === true;
              this.items.push({"title": title, "done": done});
              localStorage.items = JSON.stringify(this.items);
              this.render();
          },
          "_items2html": function() {
            var h = '<ul>';
            for (var i = 0; i < this.items.length; i++) {
               h+= "<li>" + this.items[i].title + "</li>";
             }
             h += "</ul>";
             return h;
          },
          "render": function() {
            $("#summary").html(this.items.length + " items(s)")
            $("#items").html(this._items2html());
          }
        };

        todos.init(JSON.parse(localStorage.items));
        todos.render();

      </script>
</body>
</html>
